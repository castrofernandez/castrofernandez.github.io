function crearPuzzle(a){function b(e,f,g,h,i){for(var j={x:-1,y:-1};j.x<0||j.x>3||j.y<0||j.y>3||h.x==j.x&&h.y==j.y;){var k=Math.floor(2*Math.random()),l=Math.floor(2*Math.random());k=f.x+(0==k?-1:1),l=f.y+(0==l?-1:1);var m=Math.floor(2*Math.random());j=0==m?{x:k,y:f.y}:{x:f.x,y:l}}d(e,f,j,i),h.x=f.x,h.y=f.y,f.x=j.x,f.y=j.y,g--,g>0?b(e,f,g,h,i):(a.className="puzzle piezas-colocadas",c(e,i))}function c(a,b){var e=b.length;if(!(0>=e)){var f=b[e-1];d(a,f.pieza,f.hueco,null),b.pop(),setTimeout(function(){c(a,b)},VELOCIDAD_PUZZLE)}}function d(a,b,c,d){var e=4*c.x+c.y,f=4*b.x+b.y,g=a[e],h=g.offsetWidth;g.style.top=b.x*h+"px",g.style.left=b.y*h+"px",a[e]=a[f],a[f]=g,d&&d.push({hueco:{x:b.x,y:b.y},pieza:{x:c.x,y:c.y}})}var e=a.offsetWidth,f=e/4;a.style.height=e+"px",a.innerHTML="";for(var g=1,h=[],i=0;4>i;i++)for(var j=0;4>j;j++){var k=document.createElement("img");k.alt="",k.src="img/puzzle/"+g+".png",k.style.top=i*f+"px",k.style.left=j*f+"px",k.style.width=f+"px",a.appendChild(k),h.push(k),g++}var l={x:0,y:3},m={x:-1,y:-1},n=[];b(h,l,MOVIMIENTOS_PUZZLE,m,n)}var VELOCIDAD_PUZZLE=120,MOVIMIENTOS_PUZZLE=25,puzzle=document.querySelector(".puzzle");crearPuzzle(puzzle),window.attachEvent?window.attachEvent("onresize",function(){crearPuzzle(puzzle)}):window.addEventListener("resize",function(){crearPuzzle(puzzle)},!1),window.attachEvent?puzzle.attachEvent("onclick",function(){crearPuzzle(puzzle)}):puzzle.addEventListener("click",function(){crearPuzzle(puzzle)},!1);